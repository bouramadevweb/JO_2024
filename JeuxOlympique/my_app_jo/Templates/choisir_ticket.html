{% extends 'base.html' %}
{% load static %}
{% block title %}Choisissez un ticket{% endblock %}

{% block content %}
    <h1>Choisir un ticket</h1>

    <form method="POST" action="{% url 'ajouter_au_panier' %}">
        {% csrf_token %}
        <label for="competitions">Choisir une compétition :</label>
        <select name="competitions" id="competitions">
            {% for competition in competitions %}
            <option value="{{ competition.pk_typ_competition }}">{{ competition.Nom }} - Lieu: {{ competition.pk_lieu.Nom }} ({{ competition.pk_lieu.Ville }})</option>
            {% endfor %}
        </select>
        <br><br>
        <h2>Offres disponibles :</h2>
        <ul>
            {% for offre in offres %}
                <div>
                    <input type="checkbox" name="offre_id" value="{{ offre.pk_Offre }}">
                    <strong>Offre: </strong> {{ offre.type }}<br>
                    <strong>Nombre de personnes: </strong> {{ offre.nombre_personnes }}<br>
                    <strong>Prix unitaire: </strong> {{ offre.prix }}<br>
                    <label for="quantite_{{ offre.pk_Offre }}">Quantité :</label>
                    <input type="number" name="quantite_{{ offre.pk_Offre }}" id="quantite_{{ offre.pk_Offre }}" value="0" min="0" max="{{ offre.nombre_personnes }}">
                    <br>
                </div>
            {% empty %}
                <li>Aucune offre disponible pour le moment.</li>
            {% endfor %}
        </ul>
        <br>
        <div>
            <button type="submit">Ajouter au panier</button>
        </div>
    </form>

    <form method="POST" action="{% url 'voir_panier' %}">
        {% csrf_token %}
        <button type="submit">Voir le panier</button>
    </form>

{% endblock %}
